"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[500,777],{777:(e,t,n)=>{n.r(t),n.d(t,{default:()=>g});var r,i,o,s=n(7528),a=n(3216),d=n(197),c=n(579);const l=d.Ay.div(r||(r=(0,s.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100vh;\n  flex-direction: column;\n  background-color: black;\n  color: rgb(245, 245, 245);\n  white-space: pre-line;\n"]))),p=d.Ay.div(i||(i=(0,s.A)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  .longshadow {\n    font-size: 12rem;\n    color: #131313;\n    color: gray;\n    text-shadow: 4px 4px 0px #131313, 8px 8px 0px #131313, 12px 12px 0px #131313;\n    text-shadow: 4px 4px 0px gray, 8px 8px 0px gray, 12px 12px 0px gray;\n  }\n\n  .o {\n    color: tomato;\n    text-shadow: 4px 4px 0px tomato, 8px 8px 0px tomato, 12px 12px 0px tomato;\n    text-shadow: 4px 4px 0px tomato, 8px 8px 0px tomato, 12px 12px 0px gray;\n  }\n"]))),h=d.Ay.div(o||(o=(0,s.A)(["\n  color: rgb(224, 241, 255);\n  transition: all 0.3s ease;\n  margin-top: 10rem;\n  cursor: pointer;\n  &:hover {\n    color: rgb(179, 219, 255);\n  }\n"]))),g=e=>{let{text:t}=e;const n=(0,a.Zp)();return(0,c.jsx)(l,{children:t?(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(p,{children:t})}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(p,{children:[(0,c.jsxs)("span",{className:"longshadow",children:["4",(0,c.jsx)("span",{className:"o",children:"0"}),"4"]}),(0,c.jsx)("span",{children:"\ud398\uc774\uc9c0\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.."})]}),(0,c.jsx)(h,{onClick:()=>{n(-1)},children:"Go back"})]})})}},940:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(5043);const i=function(e,t){let{threshold:n=.1,root:i=null,rootMargin:o="0%"}=t;const[s,a]=(0,r.useState)(),d=e=>{let[t]=e;a(t)};return(0,r.useEffect)((()=>{const t=null===e||void 0===e?void 0:e.current,r=!!window.IntersectionObserver;if(!t||!r)return;const s=new IntersectionObserver(d,{threshold:n,root:i,rootMargin:o});return s.observe(t),()=>s.disconnect()}),[null===e||void 0===e?void 0:e.current,i,o,JSON.stringify(n)]),s}},9500:(e,t,n)=>{n.r(t),n.d(t,{default:()=>F});var r=n(7528),i=n(5043),o=n(5475),s=n(197),a=n(940),d=n(9523),c=n(777),l=n(5714),p=n(5818),h=n(8245),g=n(3401);const x=()=>{const e=["card_small","card_medium","card_large"];return e[Math.floor(Math.random()*e.length)]},u=e=>{const{fetchNextPage:t,isFetching:n,isFetchingNextPage:r,hasNextPage:o,isLoading:s,data:a,error:d}=(0,l.q)({queryKey:[h.Z.posts,e],queryFn:t=>{let{pageParam:n=1}=t;return(async(e,t)=>{var n;t&&await new Promise((e=>setTimeout(e,1e3)));const r=await p.A.get("/api/posts?/page="+e,{params:{limit:20,page:e,searchParams:t}}),i={...null===r||void 0===r?void 0:r.data},o=[];return null===r||void 0===r||null===(n=r.data)||void 0===n||n.posts.map((e=>o.push({...e,className:x()}))),i.posts=o,i})(n,e)},initialPageParam:1,getNextPageParam:e=>{var t;return(null===(t=e.posts)||void 0===t?void 0:t.length)>0&&e.page!==e.totalPage?e.page+1:void 0}});return(0,i.useEffect)((()=>{d&&(console.log(d),g.oR.error("\uac8c\uc2dc\uae00\uc744 \ubd88\ub7ec\uc624\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."))}),[d]),{fetchNextPage:t,isFetching:n,isFetchingNextPage:r,hasNextPage:o,isLoading:s,data:a,error:d}};var v,m,f,P,w,b=n(579);const y=s.Ay.div(v||(v=(0,r.A)(["\n  padding-top: 10rem;\n  min-height: 100vh;\n  background: black;\n  overflow: hidden;\n  @media (max-width: 768px) {\n    padding-top: 5rem;\n  }\n"]))),j=s.Ay.div(m||(m=(0,r.A)(["\n  padding: 0;\n  width: 80vw;\n  margin: 0 auto;\n  display: grid;\n  grid-template-columns: repeat(auto-fill, 250px);\n  grid-auto-rows: 10px;\n  justify-content: center;\n\n  .card_small {\n    grid-row-end: span 26;\n  }\n  .card_medium {\n    grid-row-end: span 33;\n  }\n  .card_large {\n    grid-row-end: span 45;\n  }\n"]))),N=s.Ay.div(f||(f=(0,r.A)(["\n  min-height: 1000px;\n"]))),A=s.Ay.div(P||(P=(0,r.A)(["\n  padding: 0px;\n  margin: 15px 10px;\n  border-radius: 10px;\n  overflow: hidden;\n  cursor: pointer;\n"]))),k=s.Ay.img(w||(w=(0,r.A)(["\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  border-radius: 10px;\n"]))),F=()=>{var e;const[t,n]=(0,o.ok)(),r=t.get("search")||"",{data:s,isLoading:l,fetchNextPage:p,hasNextPage:h,isFetching:g,isFetchingNextPage:x}=u(r),v=(0,i.useRef)(null),m=(0,a.A)(v,{}),f=!(null===m||void 0===m||!m.isIntersecting),P=(0,i.useCallback)((async()=>{const e=await p();e.isError&&console.log(e.error)}),[p]);return(0,i.useEffect)((()=>{let e;return f&&h&&(e=setTimeout((()=>{P()}),500)),()=>{clearTimeout(e)}}),[P,f,h]),l||0!==(null===s||void 0===s?void 0:s.pages[0].posts.length)?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(y,{children:[l?(0,b.jsx)(N,{children:(0,b.jsx)(d.A,{})}):(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(j,{children:null===s||void 0===s||null===(e=s.pages)||void 0===e?void 0:e.map((e=>{var t;return null===e||void 0===e||null===(t=e.posts)||void 0===t?void 0:t.map((e=>(0,b.jsx)(A,{className:e.className,children:(0,b.jsx)(o.N_,{to:"/post/".concat(null===e||void 0===e?void 0:e._id),children:(0,b.jsx)(k,{src:null===e||void 0===e?void 0:e.images[0]})})},e._id)))}))})}),(g||x)&&(0,b.jsx)(d.A,{loader:!0})]}),(0,b.jsx)("div",{ref:v,style:{height:"40px",width:"100%",marginBottom:"40px"}})]}):(0,b.jsx)(c.default,{text:"\uc544\uc9c1 \uc791\uc131\ub41c \uac8c\uc2dc\uae00\uc774 \uc5c6\uc2b5\ub2c8\ub2e4!"})}},8245:(e,t,n)=>{n.d(t,{Z:()=>r,l:()=>i});const r={posts:"posts"},i={post:"post",postLike:"postLike",postBookmark:"postBookmark"}},5714:(e,t,n)=>{n.d(t,{q:()=>a});var r=n(888),i=n(28),o=class extends r.${constructor(e,t){super(e,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e,t){super.setOptions({...e,behavior:(0,i.PL)()},t)}getOptimisticResult(e){return e.behavior=(0,i.PL)(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,t){var n,r;const{state:o}=e,s=super.createResult(e,t),{isFetching:a,isRefetching:d}=s,c=a&&"forward"===(null===(n=o.fetchMeta)||void 0===n||null===(n=n.fetchMore)||void 0===n?void 0:n.direction),l=a&&"backward"===(null===(r=o.fetchMeta)||void 0===r||null===(r=r.fetchMore)||void 0===r?void 0:r.direction);return{...s,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:(0,i.rB)(t,o.data),hasPreviousPage:(0,i.RQ)(t,o.data),isFetchingNextPage:c,isFetchingPreviousPage:l,isRefetching:d&&!c&&!l}}},s=n(226);function a(e,t){return(0,s.t)(e,o,t)}}}]);
//# sourceMappingURL=500.685b7085.chunk.js.map